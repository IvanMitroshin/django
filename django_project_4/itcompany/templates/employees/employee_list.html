{% extends 'base.html' %}

{% block title %}Сотрудники - IT Company{% endblock %}

{% block content %}
<h1 class="page-title">Все сотрудники</h1>

<div class="employee-grid">
    {% for employee in employees %}
    <a href="{% url 'employee_detail' employee.id %}" class="employee-card-link">
        <div class="employee-card">
            {% if employee.first_image %}
            <div class="employee-photo">
                <img src="{{ employee.first_image.image.url }}" alt="{{ employee.last_name }} {{ employee.first_name }}"
                    class="profile-image">
            </div>
            {% endif %}
            <div class="employee-info">
                <div class="employee-name">
                    {{ employee.last_name }} {{ employee.first_name }}
                </div>
                <div class="employee-experience">
                    Стаж: {{ employee.work_days }} дней
                </div>
                <div class="employee-skills">
                    {% for skill in employee.skills.all|slice:":3" %}
                    <span class="skill-tag">{{ skill.skill.get_name_display }}</span>
                    {% endfor %}
                    {% if employee.skills.count > 3 %}
                    <span class="skill-tag">+{{ employee.skills.count|add:"-3" }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
    {% endfor %}
</div>

<div class="pagination">
    <span class="step-links">
        {% if employees.has_previous %}
        <a href="?page=1">&laquo; первая</a>
        <a href="?page={{ employees.previous_page_number }}">предыдущая</a>
        {% endif %}

        <span class="current">
            Страница {{ employees.number }} из {{ employees.paginator.num_pages }}
        </span>

        {% if employees.has_next %}
        <a href="?page={{ employees.next_page_number }}">следующая</a>
        <a href="?page={{ employees.paginator.num_pages }}">последняя &raquo;</a>
        {% endif %}
    </span>
</div>
{% endblock %}